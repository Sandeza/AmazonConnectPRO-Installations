{"modules":[{"id":"919982d6-3066-49e5-afe5-619896781245","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"04aacf02-1a6a-4df8-9a3b-5cce1d6e25a4"},{"condition":"Error","transition":"04aacf02-1a6a-4df8-9a3b-5cce1d6e25a4"}],"parameters":[],"metadata":{"position":{"x":2341,"y":329.1241760253907},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"99458f47-6941-48ce-9b90-fdf184759b22","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2466,"y":719.1241760253906}}},{"id":"04aacf02-1a6a-4df8-9a3b-5cce1d6e25a4","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2601,"y":370.1241760253907}}},{"id":"410057d0-9390-486b-bbb4-c4def2a7367c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"99458f47-6941-48ce-9b90-fdf184759b22"}],"parameters":[{"name":"Text","value":"An error occurred when we tried to start streaming.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1036,"y":770.1241760253906},"useDynamic":false}},{"id":"e7825b58-a9db-4935-9f83-e67a564176e8","type":"SetAttributes","branches":[{"condition":"Success","transition":"8f76ffad-b7c2-4b71-8eb5-7d1e17c53a33"},{"condition":"Error","transition":"8f76ffad-b7c2-4b71-8eb5-7d1e17c53a33"}],"parameters":[{"name":"Attribute","value":"true","key":"transcribeCall","namespace":null},{"name":"Attribute","value":"true","key":"saveCallRecording","namespace":null},{"name":"Attribute","value":"aid","key":"aid","namespace":"External"},{"name":"Attribute","value":"sak","key":"sak","namespace":"External"},{"name":"Attribute","value":"sst","key":"sst","namespace":"External"},{"name":"Attribute","value":"High","key":"FD_Priority","namespace":null}],"metadata":{"position":{"x":941,"y":301.1241760253907}}},{"id":"abe8c2b7-f002-41b1-8e9e-374ff32c2351","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"e7825b58-a9db-4935-9f83-e67a564176e8"},{"condition":"Error","transition":"e7825b58-a9db-4935-9f83-e67a564176e8"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:342003599168:function:prod-kinesis-transcribe-stack-initContactDetails-1OSKHU135U0Y1","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":663,"y":303.1241760253907},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"3434e4a0-e2c1-4c3a-9f52-81ae81a852e2","type":"SetQueue","branches":[{"condition":"Success","transition":"919982d6-3066-49e5-afe5-619896781245"},{"condition":"Error","transition":"919982d6-3066-49e5-afe5-619896781245"}],"parameters":[{"name":"Agent","value":"arn:aws:connect:us-east-1:342003599168:instance/992bd625-a3a8-44a3-a9b2-de3f08539ecc/agent/8beb52db-bd69-4e74-b98c-51b03ae62b1d","namespace":null,"resourceName":"freshdesk-agent (Freshdesk agent)"}],"metadata":{"position":{"x":2103,"y":330.1241760253907},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:342003599168:instance/992bd625-a3a8-44a3-a9b2-de3f08539ecc/agent/8beb52db-bd69-4e74-b98c-51b03ae62b1d","text":"freshdesk-agent (Freshdesk agent)"}}},{"id":"aa21389d-0252-465c-80ec-2c9ea9a83b19","type":"PlayPrompt","branches":[{"condition":"Success","transition":"99458f47-6941-48ce-9b90-fdf184759b22"}],"parameters":[{"name":"Text","value":"An error occurred with the KVS trigger lambda function.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1748,"y":551.1241760253906},"useDynamic":false}},{"id":"fa7d6eb7-7cfb-4480-9cae-6bc8eac1c79f","type":"SetAttributes","branches":[{"condition":"Success","transition":"6728609a-9707-41f7-a87c-30ac1fde4f4c"},{"condition":"Error","transition":"6728609a-9707-41f7-a87c-30ac1fde4f4c"}],"parameters":[{"name":"Attribute","value":"customerInfo","key":"customerInfo","namespace":"External"}],"metadata":{"position":{"x":924.67041015625,"y":15}}},{"id":"6728609a-9707-41f7-a87c-30ac1fde4f4c","type":"StartMediaStreaming","branches":[{"condition":"Success","transition":"abe8c2b7-f002-41b1-8e9e-374ff32c2351"},{"condition":"Error","transition":"410057d0-9390-486b-bbb4-c4def2a7367c"}],"parameters":[{"name":"Track","value":"FromCustomer"},{"name":"Track","value":"ToCustomer"},{"name":"MediaStreamTypes","value":"Audio"}],"metadata":{"position":{"x":389,"y":273.1241760253907},"fromCustomer":true,"toCustomer":true}},{"id":"53e6aa2b-e374-4ae6-bfc9-1285d2ac202f","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"0f652798-d350-4939-9d8a-9cf450d35f53"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"}],"metadata":{"position":{"x":327,"y":34.124176025390625}}},{"id":"0f652798-d350-4939-9d8a-9cf450d35f53","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"fa7d6eb7-7cfb-4480-9cae-6bc8eac1c79f"},{"condition":"Error","transition":"6728609a-9707-41f7-a87c-30ac1fde4f4c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:342003599168:function:sandeza-freshdesk-integration","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"customerNumber","value":"Customer Number","namespace":"System"}],"metadata":{"position":{"x":628.0722045898438,"y":22.605072021484375},"dynamicMetadata":{"customerNumber":true},"useDynamic":false},"target":"Lambda"},{"id":"856dd865-e5a0-49c6-aacc-55fe53c38a22","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"53e6aa2b-e374-4ae6-bfc9-1285d2ac202f"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":87,"y":26.81619123451611}}},{"id":"9fb784cb-9b29-4e39-b5cb-8b7ade1573cf","type":"SetEventHook","branches":[{"condition":"Success","transition":"856dd865-e5a0-49c6-aacc-55fe53c38a22"},{"condition":"Error","transition":"856dd865-e5a0-49c6-aacc-55fe53c38a22"}],"parameters":[{"name":"Type","value":"CustomerQueue"},{"name":"ContactFlowId","value":"arn:aws:connect:us-east-1:342003599168:instance/992bd625-a3a8-44a3-a9b2-de3f08539ecc/contact-flow/58b0d982-8326-40d1-89a8-92cbe281326f","resourceName":"0 Terminate"}],"metadata":{"position":{"x":80,"y":203},"contactFlow":{"id":"arn:aws:connect:us-east-1:342003599168:instance/992bd625-a3a8-44a3-a9b2-de3f08539ecc/contact-flow/58b0d982-8326-40d1-89a8-92cbe281326f","text":"0 Terminate"},"customerOrAgent":true,"useDynamic":false}},{"id":"97a964a7-5dd2-4c82-b21f-173b209be8a7","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"3434e4a0-e2c1-4c3a-9f52-81ae81a852e2"},{"condition":"Error","transition":"aa21389d-0252-465c-80ec-2c9ea9a83b19"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:342003599168:function:prod-kinesis-transcribe-stack-kvsConsumerTrigger-335MZJSNS45K","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":1723,"y":270.1241760253907},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"8f76ffad-b7c2-4b71-8eb5-7d1e17c53a33","type":"SetAttributes","branches":[{"condition":"Success","transition":"058fbb22-39ff-4622-9591-3a790ef60a4f"},{"condition":"Error","transition":"058fbb22-39ff-4622-9591-3a790ef60a4f"}],"parameters":[{"name":"Attribute","value":"en-US","key":"languageCode","namespace":null}],"metadata":{"position":{"x":1194,"y":298.1241760253907}}},{"id":"058fbb22-39ff-4622-9591-3a790ef60a4f","type":"PlayPrompt","branches":[{"condition":"Success","transition":"97a964a7-5dd2-4c82-b21f-173b209be8a7"}],"parameters":[{"name":"Text","value":"Please wait we will transfer to our agent","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1479,"y":319.1241760253907},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"9fb784cb-9b29-4e39-b5cb-8b7ade1573cf","metadata":{"entryPointPosition":{"x":15,"y":373.1241760253907},"snapToGrid":false,"name":"0 . kvsStreamingFlow","description":null,"type":"contactFlow","status":"published","hash":"9a5224e7b7f3c6864d291de498ca26001749a0dfc246d48654ad1ecd26fd4aa3"}}